{"version":3,"sources":["components/Filter.js","services/phonebook.js","components/PersonForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","console","log","field","setField","value","onChange","event","target","baseURL","axios","get","then","response","data","newObject","post","id","put","delete","PersonForm","newName","setNewName","newNumber","setNewNumber","persons","setPersons","timedNotification","undefined","text","type","alert","onSubmit","preventDefault","newPerson","name","number","find","person","window","confirm","phonebookService","map","p","catch","error","concat","Persons","deleteCallback","filter","personsToShow","key","onClick","Notification","message","className","App","useState","search","setSearch","errorMsg","setErrorMsg","setTimeout","useEffect","toLowerCase","includes","personDeleteCallback","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9ba44e40.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n    console.log('Filter', props)\r\n\r\n    const field = props.field\r\n    const setField = props.setField\r\n\r\n\r\n    const handlerFilter = (event) => \r\n    {\r\n      setField(event.target.value)\r\n    }\r\n\r\n    return (\r\n        <div>search:<input value={field} onChange={handlerFilter}/></div>\r\n    )\r\n}\r\n\r\nexport default Filter","import axios from 'axios'\r\n\r\nconst baseURL = \"/api/persons\"\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseURL)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = (newObject) => {\r\n    const request = axios.post(baseURL, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseURL}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst erase = (id) => {\r\n    console.log(`will delete id ${id}`)\r\n    const request = axios.delete(`${baseURL}/${id}`)\r\n    return request.then(response => response)\r\n}\r\n\r\nexport default { getAll, create, update, erase }","import React from 'react'\r\n\r\nimport phonebookService from '../services/phonebook'\r\n\r\nconst PersonForm = (props) => {\r\n    console.log('PersonForm', props)\r\n\r\n    const newName = props.newName\r\n    const setNewName = props.setNewName\r\n    const newNumber = props.newNumber\r\n    const setNewNumber = props.setNewNumber\r\n    const persons = props.persons\r\n    const setPersons = props.setPersons\r\n\r\n    const timedNotification = props.timedNotification !== undefined ? props.timedNotification : (text,type) => alert(text)\r\n\r\n    const addNewPerson = (event) => {\r\n        event.preventDefault()\r\n      const newPerson = {\r\n          name: newName,\r\n          number: newNumber\r\n      }\r\n  \r\n      if (persons.find(person => person.name === newName)) {\r\n          const person = persons.find(person => person.name === newName)\r\n          if (window.confirm(`${person.name} is already added, update the number?`)){\r\n            person.number = newNumber\r\n            phonebookService.update(person.id, person)\r\n            .then(response => {\r\n              setPersons(persons.map(p => p.id===response.id?response:p))\r\n              setNewNumber('')\r\n              setNewName('')\r\n              timedNotification(`${response.name} updated`,'success')\r\n            })\r\n            .catch(error => {\r\n              timedNotification(`Information on ${person.name} has already been removed from the server`, 'error')\r\n              console.log(error)\r\n            })\r\n          }\r\n        \r\n      } else {\r\n\r\n          phonebookService.create(newPerson)\r\n            .then(response => {\r\n              setPersons(persons.concat(response))\r\n              setNewName('')\r\n              setNewNumber('')\r\n              timedNotification(`${response.name} added`,'success')\r\n            })\r\n            .catch(error => {\r\n              timedNotification(\"Error creating person in db, check console\", 'error')\r\n              console.log(error)\r\n            })\r\n      }\r\n    }\r\n\r\n    const handlerNewName = (event) => {\r\n        setNewName(event.target.value)\r\n      }\r\n    \r\n      const handlerNewNumber = (event) => {\r\n          setNewNumber(event.target.value)\r\n      }\r\n\r\n    return (\r\n    <div>\r\n      <form onSubmit={addNewPerson}>\r\n        <div>name: <input value={newName} onChange={handlerNewName}/></div>\r\n        <div>number: <input value={newNumber} onChange={handlerNewNumber}/></div>\r\n        <div><button type=\"submit\">add</button></div>\r\n      </form>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Persons = (props) => {\r\n    console.log('Persons', props)\r\n    const persons = props.persons\r\n    const deleteCallback = props.deleteCallback !== undefined ? props.deleteCallback : () => alert(\"no callback set\")\r\n\r\n    const filter = props.filter!==undefined ? props.filter : ()=>true\r\n\r\n    //const filter = props.filter\r\n    const personsToShow = persons.filter(filter)\r\n\r\n    return (\r\n        <div>\r\n        <ul>\r\n      {personsToShow.map(person=>\r\n        <li key={person.name}>\r\n          {person.name} \r\n          {person.number} \r\n          <button onClick={() => deleteCallback(person)}>delete</button>\r\n        </li>\r\n      )}\r\n      </ul>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Notification = ({message}) => {\r\n    console.log(\"Notification\", message)\r\n    if (message.text === null) {\r\n        console.log(\"returning null\")\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className= {message.type}>\r\n            {message.text}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\n\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\n\r\nimport phonebookService from './services/phonebook'\r\n\r\nimport Notification from './components/Notification'\r\n\r\nconst App = () => {\r\n\r\n  const [persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ search, setSearch ] = useState('') \r\n\r\n  const [ errorMsg, setErrorMsg ] = useState({text:null, type:'success'})\r\n\r\n  const timedNotification = (text, type) => {\r\n    setErrorMsg({text, type})\r\n    setTimeout(() => {setErrorMsg({text:null, type:'success'})}, 5000)\r\n  }\r\n\r\n\r\n  const effectHook = () => {\r\n    console.log('effect')\r\n    phonebookService.getAll()\r\n    .then(response => {\r\n      setPersons(response)\r\n      timedNotification('DB loaded','success')\r\n    })\r\n    .catch(error => {\r\n      timedNotification(\"Error while loading db, check console.\", 'error')\r\n      console.log(error)\r\n    })\r\n  }\r\n  useEffect(effectHook, [])\r\n\r\n  const personDeleteCallback = (person) => {\r\n    console.log('personDeleteCallback', person)\r\n    if (window.confirm(`Delete ${person.name}?`))\r\n    {\r\n      phonebookService.erase(person.id)\r\n      .then(response => {\r\n        console.log(response)\r\n        setPersons(persons.filter(p => p.id !== person.id))\r\n        timedNotification(`${person.name} deleted`,'success')\r\n      })\r\n      .catch(error => {\r\n        timedNotification(\"Erro while deleting. check console.\", 'error')\r\n        console.log(error)\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Search</h2>\r\n      <Filter\r\n        field={search}\r\n        setField={setSearch}\r\n      />\r\n      <h2>Phonebook</h2>\r\n      <Notification message={errorMsg}/>\r\n      <PersonForm\r\n        persons={persons}\r\n        setPersons={setPersons}\r\n        newName={newName}\r\n        setNewName={setNewName}\r\n        newNumber={newNumber}\r\n        setNewNumber={setNewNumber}\r\n        timedNotification ={timedNotification}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons\r\n        persons={persons} \r\n        filter={person => person.name.toLowerCase().includes(search.toLowerCase())}\r\n        deleteCallback = {(person) => personDeleteCallback(person)}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css'\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}